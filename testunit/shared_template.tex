@@0\documentclass[14pt,a4paper]{extarticle}
@@R\documentclass[14pt,a4paper,twoside]{extreport}
\usepackage{amssymb,latexsym,amsmath}
\usepackage[cp1251]{inputenc}
\usepackage[obeyspaces,spaces]{url}
\usepackage[unicode,ps2pdf]{hyperref}
\usepackage[russian]{babel}
@@0\usepackage[dvips,hmargin=15mm,vmargin={15mm,20mm}]{geometry}
@@R\usepackage[dvips,hmargin=15mm,bindingoffset=10mm,twoside,vmargin={15mm,20mm}]{geometry}
\usepackage{indentfirst}
\usepackage[labelsep=period]{caption}
\usepackage{tabulary}
\usepackage{longtable}
\usepackage[dvips,dvipsnames]{xcolor}
\usepackage[dvips]{graphicx}
\usepackage{listings}
\usepackage{pstricks,pst-plot,pst-coil,pst-node}
\usepackage{versions}
\usepackage{enumerate}
\usepackage{cite}
\usepackage{calc}

% Logos
\newcommand{\we}{ЗАО "Техсистем"}
\newcommand{\harrow}{\hspace{0pt}$\Rightarrow$\hspace{0pt}}

% package options {hyperref} 
\hypersetup
{
	pdfpagemode=UseNone,
	pdfpagelayout=OneColumn,
	colorlinks,
	linkcolor=blue,
	pdfauthor={ЗАО "ТИЛ"},
	pdftitle={@{title}},
	pdfsubject={@{subject}}
}

% package options {url} 
\urlstyle{same}
\Urlmuskip = 0mu plus 1mu

% package options {longtable} 
\setlength\LTpre{0pt}\setlength\LTpost{0pt}

% package options {listings} 
\renewcommand{\lstlistingname}{Пример}
\lstset
{
	basicstyle=\ttfamily, % print whole listing small normalsize \small
	keywordstyle=\color{blue}, % underlined bold black keywords
	identifierstyle=, % nothing happens
	stringstyle=, % typewriter type for strings
	showstringspaces=false,
	breaklines=true,
	extendedchars=true,
	inputencoding=cp1251,
	tabsize=4
}

% package options {listings} 
\lstset{inputencoding=cp1251,extendedchars=true,tabsize=4,breaklines=true,showstringspaces=false}
\renewcommand{\lstlistingname}{Листинг}
%\lstset{frame=single,float=tbhp}
\lstset{basicstyle=\sffamily\small,keywordstyle=\bfseries\color{BlueViolet},commentstyle=\itshape\color{OliveGreen},stringstyle=\color{RedViolet}}
\lstdefinestyle{lst}{language={}}
\newcommand{\lst}{\lstinline[style=lst,basicstyle=\sffamily]}
\lstdefinestyle{cpp}{language=C++}
\newcommand{\cpp}{\lstinline[style=cpp,basicstyle=\sffamily]}
\lstdefinestyle{lua}{language=lua}
\newcommand{\lua}{\lstinline[style=lua,basicstyle=\sffamily]}

% \lstdefinelanguage[5.1]{lua}[5.1]{lua}
\lstdefinelanguage{lua}
{
    morekeywords=[1]{and, break, do, else, elseif, end, false, for, function, if, in, local, nil, not, or, repeat, return, then, true, until, while},
    morekeywords=[2]{_VERSION, assert, collectgarbage, dofile, error, gcinfo, loadfile, loadstring, print, rawget, rawset, require, tonumber, tostring, type, unpack},
    % Lua 4.0
    morekeywords=[2]{_ALERT, _ERRORMESSAGE, _INPUT, _PROMPT, _OUTPUT, _STDERR, _STDIN, _STDOUT, call, dostring, foreach, foreachi, getn, globals, newtype, sort, tinsert, tremove},
    % Lua 5.0
    morekeywords=[2]{_G, getfenv, getmetatable, ipairs, loadlib, next, pairs, pcall, rawequal, setfenv, setmetatable, xpcall, string, table, math, coroutine, io, os, debug},
    % Lua 5.1
    morekeywords=[2]{load, module, select},
    % Lua 4.0
    morekeywords=[3]{abs, acos, asin, atan, atan2, ceil, cos, deg, exp, floor, format, frexp, gsub, ldexp, log, log10, max, min, mod, rad, random, randomseed, sin, sqrt, strbyte, strchar, strfind, strlen, strlower, strrep, strsub, strupper, tan},
    % Lua 5.0
    morekeywords=[3]{string, byte, char, dump, find, len, lower, rep, sub, upper, format, gfind, gsub, table, concat, foreach, foreachi, getn, sort, insert, remove, setn, math, abs, acos, asin, atan, atan2, ceil, cos, deg, exp, floor, frexp, ldexp, log, log10, max, min, mod, pi, pow, rad, random, randomseed, sin, sqrt, tan},
    % Lua 5.1
    morekeywords=[3]{gmatch, match, reverse, maxn, cosh, fmod, modf, sinh, tanh, huge},
    % Lua 4.0
    morekeywords=[4]{openfile, closefile, readfrom, writeto, appendto, remove, rename, flush, seek, tmpfile, tmpname, read, write, clock, date, difftime, execute, exit, getenv, setlocale, time},
    % Lua 5.0
    morekeywords=[4]{coroutine, create, resume, status, wrap, yield, io, close, flush, input, lines, open, output, read, tmpfile, type, write, stdin, stdout, stderr, os, clock, date, difftime, execute, exit, getenv, remove, rename, setlocale, time, tmpname},
    % Lua 5.1
    morekeywords=[4]{running, package, cpath, loaded, loadlib, path, preload, seeall, popen},
    sensitive=true,
    morecomment=[l]{--},
    morecomment=[s]{--[[}{]]},
    morestring=[b]", stringstyle=\color{orange},
    morestring=[d]', stringstyle=\color{red},
    float=h,
    backgroundcolor=\color[rgb]{0.9, 0.9, 0.9},
    basicstyle=\fontfamily{ptm}\small\upshape,
    keywordstyle=\bfseries\color{BlueViolet},
    commentstyle=\itshape\color{OliveGreen},
    showstringspaces=false,
    tabsize=4,
    breaklines=true,
    inputencoding=cp1251,
}

% \bibliographystyle{gost780u}

% Utilities
\newcommand{\todo}[1]{}
\excludeversion{TRASH}
%\includeversion{DRAFT}

%\newcounter{enotenumber}\addtocounter{enotenumber}{1}
\newcommand{\enote}[2][EN]{\footnote{#1: #2}\marginpar{Пр.\arabic{footnote}!}}

\begin{document}

\title{@{title}}
\author{\we}
%\date{Редакция @{revision}}
\maketitle

\tableofcontents

\input{@{FILE_NAME}}

\end{document}
